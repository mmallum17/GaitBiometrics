<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title style="color:#212F3D;"> Accelerometer Javascript Test!</title>
    <meta name="viewport" content="width=device-width,user-scalable=yes" />
    <style>
        body {
            font-family: helvetica, arial, sans serif;
        }
    </style>
</head>

<body>
<div id="content">
    <h1 style="color:#212F3D;">Accelerometer Javascript Test!</h1>
    <ul>
        <li>acceleration x: <span id="accelerationX"></span></li>
        <li>acceleration y: <span id="accelerationY"></span></li>
        <li>acceleration z: <span id="accelerationZ"></span></li>
        
        <li>rotation x: <span id="rotationAlpha"></span></li>
        <li>rotation y: <span id="rotationBeta"></span></li>
        <li>rotation z: <span id="rotationGamma"></span></li>

        <li>Message: <span id="message"></span></li>
    </ul>
</div>
<script type="text/javascript">

    var x = 0, y = 0,
            vx = 0, vy = 0,
            ax = 0, ay = 0;

    if (window.DeviceMotionEvent != undefined) {
        window.ondevicemotion = function (e) {
            /*ax = event.accelerationIncludingGravity.x * 5;
             ay = event.accelerationIncludingGravity.y * 5;*/
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } else {
                // code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("message").innerHTML = this.responseText;
                }
            };
//Accelerometer
            var accX = e.accelerationIncludingGravity.x;
//            var accJSONX = JSON.stringify(accArrayX);
            document.getElementById("accelerationX").innerHTML = accX;

            var accY = e.accelerationIncludingGravity.y;
//            var accJSONY = JSON.stringify(accArrayY);
            document.getElementById("accelerationY").innerHTML = accY;

            var accZ = e.accelerationIncludingGravity.z;
//            var accJSONZ = JSON.stringify(accArray);
            document.getElementById("accelerationZ").innerHTML = accZ;

//Gyroscope
            var alpha = e.rotationRate.alpha;
            document.getElementById("rotationAlpha").innerHTML = alpha;

            var beta = e.rotationRate.beta;
            document.getElementById("rotationBeta").innerHTML = beta;

            var gamma = e.rotationRate.gamma;
            document.getElementById("rotationGamma").innerHTML = gamma;





            //document.getElementById("accelerationY").innerHTML = e.accelerationIncludingGravity.y.toFixed(5);
            //document.getElementById("accelerationZ").innerHTML = e.accelerationIncludingGravity.z.toFixed(5);

            /*if ( e.rotationRate ) {
             document.getElementById("rotationAlpha").innerHTML = e.rotationRate.alpha.toFixed(5);
             document.getElementById("rotationBeta").innerHTML = e.rotationRate.beta.toFixed(5);
             document.getElementById("rotationGamma").innerHTML = e.rotationRate.gamma.toFixed(5);
             }*/


            xmlhttp.open("GET","database.php?x="+accX+"&y="+accY+"&z="+accZ+"&alpha="+alpha+"&beta="+beta+"&gamma="+gamma,true);
            xmlhttp.send();

            //xmlhttp.open("GET","database.php?alpha="+alpha+"&beta="+beta+"&gamma="+gamma,true);
            //xmlhttp.send();
        }
    }

    if (window.DeviceOrientationEvent) {
        window.addEventListener('deviceorientation', function(eventData) {
            // gamma is the left-to-right tilt in degrees
            console.log(eventData.gamma);

            // beta is the front-to-back tilt in degrees
            console.log(eventData.beta);

            // alpha is the compass direction the device is facing in degrees
            console.log(eventData.alpha);
        }, false);
    }

</script>


</body>
</html>